{"ast":null,"code":"import setAuthorizationToken from \"../../Utils/setAuthorization\";\nimport jwt from \"jsonwebtoken\";\nimport axios from \"axios\";\nimport { USER_LOGIN_REQUEST, USER_LOGIN_SUCCESS, USER_LOGIN_FAIL, SIGNOUT_USER, USER_REGISTER_REQUEST, USER_REGISTER_SUCCESS, USER_REGISTER_FAIL, USER_DETAILS_REQUEST, USER_DETAILS_SUCCESS, USER_DETAILS_FAIL, USER_UPDATE_PROFILE_REQUEST, USER_UPDATE_PROFILE_SUCCESS, USER_UPDATE_PROFILE_FAIL, SET_CURRENT_USER } from \"../Constant/AuthConstant\"; //Login Action\n\nexport const login = (email, password) => {\n  return function (dispatch) {\n    dispatch({\n      type: USER_LOGIN_REQUEST,\n      payload: true\n    });\n    let OPTIONS = {\n      url: `http://localhost:5000/login/`,\n      method: \"POST\",\n      data: {\n        email: email,\n        password: password\n      },\n      headers: {\n        \"content-type\": \"application/json\"\n      }\n    };\n    axios(OPTIONS).then(res => {\n      const msg = res.data.msg;\n\n      if (msg === \"Success\") {\n        const etoken = res.data.token;\n        localStorage.setItem(\"etoken\", etoken);\n        setAuthorizationToken(etoken); // console.log(etoken);\n\n        dispatch(setCurrentUser(jwt.decode(etoken)));\n        dispatch({\n          type: USER_LOGIN_SUCCESS,\n          payload: msg,\n          isSigninIn: true\n        });\n      } else {\n        dispatch({\n          type: USER_LOGIN_FAIL,\n          payload: msg,\n          isSigninIn: false\n        });\n      }\n    }).catch(error => {\n      dispatch({\n        type: USER_LOGIN_FAIL,\n        loading: false,\n        payload: error.message\n      });\n    });\n  };\n}; // logout Action\n\nexport const logout = () => {\n  return function (dispatch) {\n    dispatch({\n      type: USER_LOGIN_REQUEST,\n      payload: true\n    });\n    localStorage.removeItem(\"etoken\");\n    setAuthorizationToken(false);\n    dispatch(setCurrentUser({}));\n    dispatch({\n      type: USER\n    });\n    dispatch({\n      type: SIGNOUT_USER,\n      payload: false\n    });\n    dispatch({\n      type: USER_LOGIN_FAIL,\n      loading: false,\n      payload: \"\"\n    });\n    window.location.href = \"/\";\n  };\n}; // SET CURRENT USER ACTION\n\nexport const setCurrentUser = result => {\n  // console.log(result);\n  return {\n    type: SET_CURRENT_USER,\n    payload: result\n  };\n}; // User Register\n\nexport const register = (name, email, password, contact) => {\n  return function (dispatch) {\n    dispatch({\n      type: USER_REGISTER_REQUEST,\n      payload: true\n    });\n    let OPTIONS = {\n      url: `http://localhost:5000/signup`,\n      method: \"POST\",\n      data: {\n        name: name,\n        email: email,\n        contact: contact,\n        password: password\n      },\n      headers: {\n        \"content-type\": \"application/json\"\n      }\n    };\n    axios(OPTIONS).then(res => {\n      const msg = res.data.msg;\n\n      if (msg === \"Success\") {\n        dispatch({\n          type: USER_REGISTER_SUCCESS,\n          payload: msg,\n          isSigninIn: false\n        });\n      } else {\n        dispatch({\n          type: USER_REGISTER_FAIL,\n          payload: msg,\n          isSigninIn: false\n        });\n      }\n    }).catch(error => {\n      dispatch({\n        type: USER_REGISTER_FAIL,\n        loading: false,\n        payload: error.message\n      });\n    });\n  };\n}; // get user details\n\nexport const getUserDetails = id => async dispatch => {\n  try {\n    dispatch({\n      type: USER_DETAILS_REQUEST\n    });\n    const token = localStorage.getItem(\"etoken\");\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"token\"\n      }\n    };\n    const {\n      data\n    } = await axios.get(`http://localhost:5000/find/${id}`, config);\n    console.log(data);\n    dispatch({\n      type: USER_DETAILS_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    dispatch({\n      type: USER_DETAILS_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n}; // Update Action\n\nexport const updateUserProfile = (user, id) => async dispatch => {\n  try {\n    dispatch({\n      type: USER_UPDATE_PROFILE_REQUEST\n    });\n    const token = localStorage.getItem(\"etoken\");\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"token\"\n      }\n    };\n    const {\n      data\n    } = await axios.put(`http://localhost:5000/update/${id}`, user, config);\n    console.log(data);\n    dispatch({\n      type: USER_UPDATE_PROFILE_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    dispatch({\n      type: USER_UPDATE_PROFILE_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};","map":{"version":3,"sources":["/home/master/Documents/herbalFinal/client/src/Redux/Action/AuthAction.js"],"names":["setAuthorizationToken","jwt","axios","USER_LOGIN_REQUEST","USER_LOGIN_SUCCESS","USER_LOGIN_FAIL","SIGNOUT_USER","USER_REGISTER_REQUEST","USER_REGISTER_SUCCESS","USER_REGISTER_FAIL","USER_DETAILS_REQUEST","USER_DETAILS_SUCCESS","USER_DETAILS_FAIL","USER_UPDATE_PROFILE_REQUEST","USER_UPDATE_PROFILE_SUCCESS","USER_UPDATE_PROFILE_FAIL","SET_CURRENT_USER","login","email","password","dispatch","type","payload","OPTIONS","url","method","data","headers","then","res","msg","etoken","token","localStorage","setItem","setCurrentUser","decode","isSigninIn","catch","error","loading","message","logout","removeItem","USER","window","location","href","result","register","name","contact","getUserDetails","id","getItem","config","Authorization","get","console","log","response","updateUserProfile","user","put"],"mappings":"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","sourcesContent":["import setAuthorizationToken from \"../../Utils/setAuthorization\";\nimport jwt from \"jsonwebtoken\";\nimport axios from \"axios\";\nimport {\n  USER_LOGIN_REQUEST,\n  USER_LOGIN_SUCCESS,\n  USER_LOGIN_FAIL,\n  SIGNOUT_USER,\n  USER_REGISTER_REQUEST,\n  USER_REGISTER_SUCCESS,\n  USER_REGISTER_FAIL,\n  USER_DETAILS_REQUEST,\n  USER_DETAILS_SUCCESS,\n  USER_DETAILS_FAIL,\n  USER_UPDATE_PROFILE_REQUEST,\n  USER_UPDATE_PROFILE_SUCCESS,\n  USER_UPDATE_PROFILE_FAIL,\n  SET_CURRENT_USER,\n} from \"../Constant/AuthConstant\";\n\n//Login Action\nexport const login = (email, password) => {\n  return function (dispatch) {\n    dispatch({\n      type: USER_LOGIN_REQUEST,\n      payload: true,\n    });\n\n    let OPTIONS = {\n      url: `http://localhost:5000/login/`,\n      method: \"POST\",\n      data: {\n        email: email,\n        password: password,\n      },\n      headers: {\n        \"content-type\": \"application/json\",\n      },\n    };\n\n    axios(OPTIONS)\n      .then((res) => {\n        const msg = res.data.msg;\n        if (msg === \"Success\") {\n          const etoken = res.data.token;\n          localStorage.setItem(\"etoken\", etoken);\n          setAuthorizationToken(etoken);\n          // console.log(etoken);\n\n          dispatch(setCurrentUser(jwt.decode(etoken)));\n          dispatch({\n            type: USER_LOGIN_SUCCESS,\n            payload: msg,\n            isSigninIn: true,\n          });\n        } else {\n          dispatch({\n            type: USER_LOGIN_FAIL,\n            payload: msg,\n            isSigninIn: false,\n          });\n        }\n      })\n      .catch((error) => {\n        dispatch({\n          type: USER_LOGIN_FAIL,\n          loading: false,\n          payload: error.message,\n        });\n      });\n  };\n};\n\n// logout Action\nexport const logout = () => {\n  return function (dispatch) {\n    dispatch({\n      type: USER_LOGIN_REQUEST,\n      payload: true,\n    });\n    localStorage.removeItem(\"etoken\");\n    setAuthorizationToken(false);\n    dispatch(setCurrentUser({}));\n    dispatch({type:USER})\n    dispatch({\n      type: SIGNOUT_USER,\n      payload: false,\n    });\n    dispatch({\n      type: USER_LOGIN_FAIL,\n      loading: false,\n      payload: \"\",\n    });\n    window.location.href = \"/\";\n  };\n};\n\n// SET CURRENT USER ACTION\nexport const setCurrentUser = (result) => {\n  // console.log(result);\n  return {\n    type: SET_CURRENT_USER,\n    payload: result,\n  };\n};\n\n// User Register\nexport const register = (name, email, password, contact) => {\n  return function (dispatch) {\n    dispatch({\n      type: USER_REGISTER_REQUEST,\n      payload: true,\n    });\n\n    let OPTIONS = {\n      url: `http://localhost:5000/signup`,\n      method: \"POST\",\n      data: {\n        name: name,\n        email: email,\n        contact: contact,\n        password: password,\n      },\n      headers: {\n        \"content-type\": \"application/json\",\n      },\n    };\n\n    axios(OPTIONS)\n      .then((res) => {\n        const msg = res.data.msg;\n        if (msg === \"Success\") {\n          dispatch({\n            type: USER_REGISTER_SUCCESS,\n            payload: msg,\n            isSigninIn: false,\n          });\n        } else {\n          dispatch({\n            type: USER_REGISTER_FAIL,\n            payload: msg,\n            isSigninIn: false,\n          });\n        }\n      })\n      .catch((error) => {\n        dispatch({\n          type: USER_REGISTER_FAIL,\n          loading: false,\n          payload: error.message,\n        });\n      });\n  };\n};\n\n// get user details\nexport const getUserDetails = (id) => async (dispatch) => {\n  try {\n    dispatch({ type: USER_DETAILS_REQUEST });\n\n    const token = localStorage.getItem(\"etoken\");\n\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"token\",\n      },\n    };\n\n    const { data } = await axios.get(\n      `http://localhost:5000/find/${id}`,\n      config\n    );\n    console.log(data);\n    dispatch({\n      type: USER_DETAILS_SUCCESS,\n      payload: data,\n    });\n  } catch (error) {\n    dispatch({\n      type: USER_DETAILS_FAIL,\n      payload:\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message,\n    });\n  }\n};\n\n// Update Action\n\nexport const updateUserProfile = (user, id) => async (dispatch) => {\n  try {\n    dispatch({ type: USER_UPDATE_PROFILE_REQUEST });\n\n    const token = localStorage.getItem(\"etoken\");\n\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"token\",\n      },\n    };\n\n    const { data } = await axios.put(\n      `http://localhost:5000/update/${id}`,\n      user,\n      config\n    );\n    console.log(data);\n    dispatch({\n      type: USER_UPDATE_PROFILE_SUCCESS,\n      payload: data,\n    });\n  } catch (error) {\n    dispatch({\n      type: USER_UPDATE_PROFILE_FAIL,\n      payload:\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message,\n    });\n  }\n};\n"]},"metadata":{},"sourceType":"module"}